<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>différence de date</title>
  </head>
  <body style="text-align:center; background-color: #dbdbdb;">

	<h1 class="p-4" style="color:white; text-shadow: 2px 2px 3px black; background-color: rgba(79, 152, 202, 0.8); " >
		Calculateur de demande de crédit magique
	</h1>

  <div class="container-fluid " id="mainContainer">

	<div class="row m-4">
  <div class="mx-auto">

    <p class="col rounded" style="background-color: #28a745; color: white;" >
      Date de départ
    </p>

		<select id="jourDe" class="m-1">
		  <option value="1">1</option>
		  <option value="2">2</option>
		  <option value="3">3</option>
		  <option value="4">4</option>
		  <option value="5">5</option>
		  <option value="6">6</option>
		  <option value="7">7</option>
		  <option value="8">8</option>
		  <option value="9">9</option>
		  <option value="10">10</option>
		  <option value="11">11</option>
		  <option value="12">12</option>
		  <option value="13">13</option>
		  <option value="14">14</option>
		  <option value="15">15</option>
		  <option value="16">16</option>
		  <option value="17">17</option>
		  <option value="18">18</option>
		  <option value="19">19</option>
		  <option value="20">20</option>
		  <option value="21">21</option>
		  <option value="22">22</option>
		  <option value="23">23</option>
		  <option value="24">24</option>
		  <option value="25">25</option>
		  <option value="26">26</option>
		  <option value="27">27</option>
		  <option value="28">28</option>
		  <option value="29">29</option>
		  <option value="30">30</option>
		  <option value="31">31</option>
		</select>

		<select id="moisDe" class="m-1">
		  <option value="1">Janvier</option>
		  <option value="2">Février</option>
		  <option value="3">Mars</option>
		  <option value="4">Avril</option>
		  <option value="5">mai</option>
		  <option value="6">Juin</option>
		  <option value="7">Juillet</option>
		  <option value="8">Aout</option>
		  <option value="9">Septembre</option>
		  <option value="10">Octobre</option>
		  <option value="11">Novembre</option>
		  <option value="12">Décembre</option>
		</select>

		<select id="anDe" class="m-1" >
		  <option value="2017">2017</option>
		  <option value="2018">2018</option>
		  <option value="2019">2019</option>
		  <option value="2020">2020</option>
		  <option value="2021">2021</option>
		  <option value="2022">2022</option>
		  <option value="2023">2023</option>
		  <option value="2024">2024</option>
		  <option value="2025">2025</option>
		  <option value="2026">2026</option>
		  <option value="2027">2027</option>
		  <option value="2028">2028</option>
		</select>

	</div>


</div>




	<div class="row m-4" >

  <div class="mx-auto">

    <p class="col rounded" style="background-color: #28a745; color: white;">
      Date de fin
    </p>

		<select id="jourA" class="m-1">
		  <option value="1">1</option>
		  <option value="2">2</option>
		  <option value="3">3</option>
		  <option value="4">4</option>
		  <option value="5">5</option>
		  <option value="6">6</option>
		  <option value="7">7</option>
		  <option value="8">8</option>
		  <option value="9">9</option>
		  <option value="10">10</option>
		  <option value="11">11</option>
		  <option value="12">12</option>
		  <option value="13">13</option>
		  <option value="14">14</option>
		  <option value="15">15</option>
		  <option value="16">16</option>
		  <option value="17">17</option>
		  <option value="18">18</option>
		  <option value="19">19</option>
		  <option value="20">20</option>
		  <option value="21">21</option>
		  <option value="22">22</option>
		  <option value="23">23</option>
		  <option value="24">24</option>
		  <option value="25">25</option>
		  <option value="26">26</option>
		  <option value="27">27</option>
		  <option value="28">28</option>
		  <option value="29">29</option>
		  <option value="30">30</option>
		  <option value="31">31</option>
		</select>

		<select id="moisA" class="m-1">
		  <option value="1">Janvier</option>
		  <option value="2">Février</option>
		  <option value="3">Mars</option>
		  <option value="4">Avril</option>
		  <option value="5">mai</option>
		  <option value="6">Juin</option>
		  <option value="7">Juillet</option>
		  <option value="8">Aout</option>
		  <option value="9">Septembre</option>
		  <option value="10">Octobre</option>
		  <option value="11">Novembre</option>
		  <option value="12">Décembre</option>
		</select>

		<select id="anA" class="m-1">
		  <option value="2017">2017</option>
		  <option value="2018">2018</option>
		  <option value="2019">2019</option>
		  <option value="2020">2020</option>
		  <option value="2021">2021</option>
		  <option value="2022">2022</option>
		  <option value="2023">2023</option>
		  <option value="2024">2024</option>
		  <option value="2025">2025</option>
		  <option value="2026">2026</option>
		  <option value="2027">2027</option>
		  <option value="2028">2028</option>
		</select>

	</div>

  </div>
    <input id="montant" type="text" placeholder="montant par mois" style="text-align: center;"/>
  </div>

  <button id="sub" class="m-4 btn btn-success ">submit</button>

<div class="after">

</div>


<style>
.footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: rgba(79, 152, 202, 0.8);

  text-align: center;
}

::selection {
  background: purple;
}
</style>

<div class="footer">
  <p><a href="" >tommyaudet@magame.ca</a></p>
</div>

 <style>
    a {color: white !important; }

  </style>



<script
			  src="https://code.jquery.com/jquery-3.4.1.min.js"
			  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
			  crossorigin="anonymous"></script>

<!-- cdn qui permet de faire un copy to clipboard -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>




	<script>

  $( document ).ready(function() {

    let anDeDepart = new Date().getFullYear();
	let moisDeDepart = new Date().getMonth();
	let jourDeDepart = new Date().getDate();

	//set les selecteur de jours, mois et dates à la date d'aujourd'hui
	  $("#anDe").val(anDeDepart);
	  $("#moisDe").val(moisDeDepart+1);
	  $("#jourDe").val(jourDeDepart);
//////////////////////////////////////////////////////////////////////////
	  $("#anA").val(anDeDepart);
	  $("#moisA").val(moisDeDepart+1);
	  $("#jourA").val(jourDeDepart);





  });


	$("#sub").click(function(){


			const jour1 = $("#jourDe").val();
			const mois1 = $("#moisDe").val();
			const an1 = $("#anDe").val();

			const jour2 = $("#jourA").val();
			const mois2 = $("#moisA").val();
			const an2 = $("#anA").val();


			const date1 = new Date( mois1 + '/' + jour1 +  '/' + an1 + '/');
			const date2 = new Date( mois2 + '/' + jour2 +  '/' + an2 + '/');


			if(date1 > date2) {
				erreur();
			} else{
				calcul();
			}


			function calcul (){

				const diffTime = Math.abs(date2 - date1);
				const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

				let montantParMois = $("#montant").val();

				let calculMontant = montantParMois/30.42 * diffDays;
				console.log(calculMontant);
				let arrondissementMontant = calculMontant.toFixed(2);
				console.log(arrondissementMontant + "arrondissement au troisième chiffre après la virgule");
				console.log(diffDays +" diff");
				$(".after").after("<div style='background-color: #4f98ca; top: -20px; opacity : 0; box-shadow: 2px 2px 6px black;' class ='container-fluid col-md-6 m-4 rounded mx-auto divResult' id=''> <p class='m-4 result' style='color : white; opacity: 0; top: -10px; position: relative; text-shadow: 2px 2px 3px black;'> " + "Le trouble/panne a commencé(e) le " + jour1 + '/' + mois1 +  '/' + an1  + " et c'est terminé(e) le " + jour2 + '/' + mois2 +  '/' + an2 + "<br />" + "Le tout pour un totale de : <br />" + diffDays + " jours sans services"  + "<br />" + "En se basant sur la montant payé par mois du client, nous devrions lui créditer : " + arrondissementMontant + " $" + " </div> </p>");
				$(".result").animate({opacity: '1', top: '0px'}, 1000);
				$(".divResult").animate({opacity: '1', top: '0px'}, 1000);

			}

			function erreur() {

			alert("erreur, la date de départ doit être avant celle de fin");

			}
			/*if( date1 > date2){

			} else {




	}*/



	});











	</script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
